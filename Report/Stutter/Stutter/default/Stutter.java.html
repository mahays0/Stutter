<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>Stutter.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">StutterTest (1) (Nov 15, 2013 8:00:05 PM)</a> &gt; <a href="../../index.html" class="el_group">Stutter</a> &gt; <a href="../index.html" class="el_bundle">Stutter</a> &gt; <a href="index.html" class="el_package">default</a> &gt; <span class="el_source">Stutter.java</span></div><h1>Stutter.java</h1><pre class="source lang-java linenums">// Introduction to Software Testing
// Authors: Paul Ammann &amp; Jeff Offutt
// Chapter 2, section 2.5, page 80

import java.io.*;

/**
 * Stutter checks for repeat words in a text file.
 * It prints a list of repeat words, by line number.
 * Stutter will accept standard input or a list
 * of file names.
 * @author Jeff Offutt
 * @since June 1989 (in C), Java version March 2003 
*/
<span class="nc" id="L15">public class Stutter</span>
{
//characters on this line will be over 80 characters long, asdasdawsdawwasadwadawdasadwada
  // Class variables used in multiple methods.
<span class="fc" id="L19">  private static boolean lastdelimit = true;</span>
<span class="fc" id="L20">  private static String curWord = &quot;&quot;, prevWord = &quot;&quot;;</span>
<span class="fc" id="L21">  private static char delimits [] =</span>
<span class="fc" id="L22">          {'	', ' ', ',', '.', '!', '-', '+', '=', ';', ':', '?',</span>
<span class="fc" id="L23">           '&amp;', '{', '}', '\\'}; // First char in list is a tab</span>

/**
 * Main parses the arguments, decides if stdin
 * or a file name, and calls Stut().
 * @param args Filename of file to check. If no argument, reads from stdin.
 * 
*/
public static void main (String[] args) throws IOException
{
   String fileName;
   FileReader myFile;
<span class="fc" id="L35">   BufferedReader inFile = null;</span>

<span class="fc bfc" id="L37" title="All 2 branches covered.">   if (args.length == 0)</span>
   {  // no file, use stdin
<span class="fc" id="L39">      inFile = new BufferedReader (new InputStreamReader (System.in));</span>
<span class="fc" id="L40">   }</span>
   else
   {
<span class="fc" id="L43">      fileName = args [0];</span>
<span class="fc bfc" id="L44" title="All 2 branches covered.">      if (fileName == null)</span>
      {  // no file name, use stdin
<span class="fc" id="L46">         inFile = new BufferedReader (new InputStreamReader (System.in));</span>
<span class="fc" id="L47">      }</span>
      else
      {  // file name, open the file.
<span class="fc" id="L50">         myFile = new FileReader (fileName);</span>
<span class="fc" id="L51">         inFile = new BufferedReader (myFile);</span>
      }
   }

<span class="fc" id="L55">   stut (inFile);</span>
<span class="fc" id="L56">}</span>

/**
* Stut() reads all lines in the input stream, and
* finds words. Words are defined as being surrounded
* by delimiters as defined in the delimits[] array.
* Every time an end of word is found, checkDupes()
* is called to see if it is the same as the
* previous word.
* @param inFile        the input stream
*/
private static void stut (BufferedReader inFile) throws IOException
{
   String inLine;
   char c;
<span class="fc" id="L71">   int linecnt = 1;</span>
<span class="fc bfc" id="L72" title="All 2 branches covered.">   while ((inLine = inFile.readLine()) != null)</span>
   {  // For each line

<span class="fc bfc" id="L75" title="All 2 branches covered.">      for (int i=0; i&lt;inLine.length(); i++)</span>
      {  // for each character
<span class="fc" id="L77">         c = inLine.charAt(i);</span>

<span class="fc bfc" id="L79" title="All 2 branches covered.">         if (isDelimit (c))</span>
         {  // Found an end of a word.
<span class="fc" id="L81">            checkDupes (linecnt);</span>
<span class="fc" id="L82">         }</span>
         else
         {
<span class="fc" id="L85">           lastdelimit = false;</span>
<span class="fc" id="L86">           curWord = curWord + c;</span>
         }
      }
<span class="fc" id="L89">      checkDupes (linecnt);</span>
<span class="fc" id="L90">      linecnt++;</span>
   }
<span class="fc" id="L92">}  // end Stut</span>


/** 
 ************************************************
 * checkDupes() checks to see if the globally defined
 * curWord is the same as prevWord and prints a message
 * if they are the same.
 ************************************************
 * @param line the line number of the current input stream
 */
private static void checkDupes (int line)
{
<span class="pc bpc" id="L105" title="1 of 2 branches missed.">   if (lastdelimit)</span>
<span class="nc" id="L106">   return; // already checked, keep skipping</span>
   
<span class="fc" id="L108">   lastdelimit = true;</span>
<span class="fc bfc" id="L109" title="All 2 branches covered.">   if (curWord.equals(prevWord))</span>
   {
 // FIXME: only print at end of repeated sequence. print # repetitions in a row.
<span class="fc" id="L112">      System.out.println (&quot;Repeated word on line &quot; + line + &quot;: &quot; +</span>
<span class="fc" id="L113">                        prevWord+ &quot; &quot; + curWord);</span>
   }
<span class="fc" id="L115">   prevWord = curWord;</span>
<span class="fc" id="L116">   curWord = &quot;&quot;;</span>
<span class="fc" id="L117">}  // end checkDupes</span>


/** 
************************************************
* Checks to see if a character is a delimiter.
************************************************
 * @param C a character from the current input stream
 * @return  true if C is a delimiter, false otherwise
*/
private static boolean isDelimit (char C)
{
<span class="fc bfc" id="L129" title="All 2 branches covered.">   for (int i = 0; i &lt; delimits.length; i++)</span>
<span class="fc bfc" id="L130" title="All 2 branches covered.">   if (C == delimits [i])</span>
<span class="fc" id="L131">      return (true);</span>
<span class="fc" id="L132">   return (false);</span>
}

} // end class Stutter
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.3.201306030806</span>StutterTest (1) (Nov 15, 2013 8:00:05 PM)</div></body></html>